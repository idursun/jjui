limit = 0

[keys]
  up = ["up", "k"]
  down = ["down", "j"]
  jump_to_parent = ["J"]
  jump_to_children = ["K"]
  jump_to_working_copy = ["@"]
  apply = ["enter"]
  force_apply = ["alt+enter"]
  cancel = ["esc"]
  toggle_select = [" "]
  new = ["n"]
  commit = ["c"]
  refresh = ["ctrl+r"]
  abandon = ["a"]
  diff = ["d"]
  quit = ["q"]
  help = ["?"]
  describe = ["D"]
  edit = ["e"]
  force_edit = ["alt+e"]
  diffedit = ["E"]
  absorb = ["A"]
  split = ["s"]
  split_parallel = ["alt+s"]
  undo = ["u"]
  redo = ["U"]
  revset = ["L"]
  exec_jj = [":"]
  exec_shell = ["$"]
  ace_jump = ["f"]
  quick_search = ["/"]
  quick_search_cycle = ["'"]
  custom_commands = ["x"]
  leader = ["\\"]
  suspend = ["ctrl+z"]
  set_parents = ["M"]
  [keys.rebase]
    mode = ["r"]
    revision = ["r"]
    source = ["s"]
    branch = ["B"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
    insert = ["i"]
    skip_emptied = ["e"]
  [keys.revert]
    mode = ["R"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
    insert = ["i"]
  [keys.duplicate]
    mode = ["y"]
    after = ["a"]
    before = ["b"]
    onto = ["d"]
  [keys.squash]
    mode = ["S"]
    keep_emptied = ["e"]
    interactive = ["i"]
  [keys.details]
    mode = ["l"]
    close = ["h"]
    split = ["s"]
    split_parallel = ["alt+s"]
    squash = ["S"]
    restore = ["r"]
    absorb = ["A"]
    diff = ["d"]
    select = ["m", " "]
    revisions_changing_file = ["*"]
  [keys.evolog]
    mode = ["v"]
    diff = ["d"]
    restore = ["r"]
  [keys.preview]
    mode = ["p"]
    toggle_bottom = ["P"]
    scroll_up = ["ctrl+p"]
    scroll_down = ["ctrl+n"]
    half_page_down = ["ctrl+d"]
    half_page_up = ["ctrl+u"]
    expand = ["ctrl+h"]
    shrink = ["ctrl+l"]
  [keys.bookmark]
    mode = ["b"]
    set = ["B"]
    delete = ["d"]
    move = ["m"]
    forget = ["f"]
    track = ["t"]
    untrack = ["u"]
  [keys.inline_describe]
    mode = ["enter"]
    accept = ["alt+enter", "ctrl+s"]
    editor = ["alt+e"]
  [keys.git]
    mode = ["g"]
    push = ["p"]
    fetch = ["f"]
  [keys.oplog]
    mode = ["o"]
    restore = ["r"]
  [keys.file_search]
    toggle = ["ctrl+t"]
    up = ["up"]
    down = ["down"]
    accept = ["enter"]
    edit = ["alt+e"]

[ui]
  theme = ""
  auto_refresh_interval = 0
  [ui.tracer]
    enabled = false
  [ui.colors]

[suggest]
  [suggest.exec]
    mode = "off"

[revisions]
  log_batching = true
  # template = 'builtin_log_compact' # overrides jj's templates.log
  # revset = "zzzzzzz"               # overrides jj's revsets.log

[preview]
  revision_command = ["show", "--color", "always", "-r", "$change_id"]
  oplog_command = ["op", "show", "$operation_id", "--color", "always"]
  file_command = ["diff", "--color", "always", "-r", "$change_id", "$file"]
  show_at_bottom = false
  show_at_start = false
  width_percentage = 50.0
  width_increment_percentage = 5.0

[oplog]
  limit = 200

[graph]
  batch_size = 50

[actions."revset.edit"]
  id = "revset.edit"
  args = { clear = true }

[actions."revisions.toggle_select"]
  id = "revisions.toggle_select"
  next = ["revisions.down"]

[actions."inline_describe.accept"]
  id = "inline_describe.accept"
  next = ["close inline_describe"]

[actions."oplog.restore"]
  id = "oplog.restore"
  next = ["close oplog"]

[actions."oplog.close"]
  id = "oplog.close"
  next = ["close oplog"]

[actions."oplog.diff"]
  id = "oplog.diff"
  next = ["open diff"]

[actions."set_parents.apply"]
  id = "set_parents.apply"
  next = ["close set_parents"]

[actions."abandon.apply"]
  id = "abandon.apply"
  next = ["refresh", "close abandon"]

[actions."abandon.force_apply"]
  id = "abandon.force_apply"
  next = ["close abandon"]

[actions."squash.apply"]
  id = "squash.apply"
  next = ["close squash"]

[actions."squash.force_apply"]
  id = "squash.apply"
  args = { "force" = true }
  next = ["close squash"]

[actions."undo.close"]
  id = "undo.close"
  next = ["close undo"]

[actions."undo.accept"]
  id = "undo.accept"
  next = ["close undo"]

[actions."bookmark_list.accept"]
  id = "bookmark_list.accept"
  next = ["list.select", "close bookmark_list"]

[actions."bookmarks.apply"]
  id = "bookmarks.apply"
  next = ["close bookmarks"]

[actions."git.apply"]
  id = "git.apply"
  next = ["close git"]

[actions."revert.apply"]
  id = "revert.apply"
  next = ["close revert"]

[actions."revisions.append_current_as_ancestor"]
  id = "revset.set"
  args = { "revset" = "$revset | ancestors($change_id, 2)" }

[actions."revisions.my_inline_describe"]
  id = "revisions.my_inline_describe"
  next = ["open inline_describe", "wait close inline_describe", "revisions.new"]

[actions."new_note_commit"]
  id = "new_note_commit"
  next = [
    { id = "run", args = { "jj" = ["new", "-A", "$change_id"]}, next = ["refresh"]},
    "wait @refresh",
    "revisions.up",
    "open inline_describe"
  ]

[actions."diff_from_here"]
  id = "open diff"
  next = [
    { id = "diff.show", args = { "jj" = ["diff", "-r", "$change_id::@"] }},
    "wait close diff",
    "switch revisions"
  ]

[actions."list_bookmarks"]
  jj = ["bookmark", "list"]
  next = [
    { id = "choose bookmark_list", items = "$output"},
    { wait = "close bookmark_list" },
    { id = "flash.add", message = "$selected" },
  ]

[actions."show_root"]
  jj = ["root"]
  next = [
    { id = "flash.add", message = "$output" },
    "refresh",
    "wait @refresh",
    { id = "flash.add", message = "hello" },
  ]

[actions."show_context_variables"]
  id = "flash.add"
  message = "checked commit ids: $checked_commit_ids"
  next = [
    { id = "flash.add", message = "file: $file" },
  ]

[bindings."bookmark_list"]
  "j" = "list.down"
  "k" = "list.up"
  "enter" = "bookmark_list.accept"
  "esc" = "close bookmark_list"

[bindings.revisions]
  "2"     = "show_root"
  "3"     = "show_context_variables"
  "N"    = "new_note_commit"
  "-"     = "list_bookmarks"
  "@" = "revisions.jump_to_working_copy"
  "enter" = "open inline_describe"
  "j" = "revisions.down"
  "k" = "revisions.up"
  " " = "revisions.toggle_select"
  "J" = "revisions.jump_to_parent"
  "K" = "revisions.jump_to_children"
  "R" = "open revert"
  "l" = "open details"
  "S" = "open squash"
  "r" = "open rebase"
  "b" = "open bookmarks"
  "g" = "open git"
  "B" = "open set_bookmark"
  "c" = "revisions.commit"
  "n" = "revisions.new"
  "A" = "revisions.absorb"
  "a" = "open abandon"
  "s" = "revisions.split"
  "d" = "revisions.diff"
  "f" = "open ace_jump"
  "v" = "open evolog"
  "M" = "open set_parents"
  "L" = "revset.edit"
  "ctrl+r" = "refresh"
  "q" = "quit"
  "o" = "open oplog"
  "u" = "open undo"
  "X" = "revisions.my_inline_describe"
  "+" = "revisions.append_current_as_ancestor"
  "ctrl+d"  = "diff_from_here"
  "p" = "toggle preview"
  "?" = "open help"
[bindings.oplog]
  "k" = "oplog.up"
  "j" = "oplog.down"
  "d" = "oplog.diff"
  "r" = "oplog.restore"
  "esc" = "oplog.close"
  "q" = "quit"
[bindings.details]
  "3"   = "show_context_variables"
  "esc" = "close details"
  "h" =   "close details"
  " " =   "details.toggle_select"
  "j" =   "details.down"
  "k" =   "details.up"
  "d" =   "details.diff"
  "r" =   "details.restore"
  "s" =   "details.split"
  "S" =   "details.squash"
  "*" =   "details.show_revisions_changing_file"
  "A" =   "details.absorb"
[bindings.diff]
  "j" =      "diff.down"
  "k" =      "diff.up"
  "ctrl+d" = "diff.halfpagedown"
  "ctrl+u" = "diff.halfpageup"
  "f" =      "diff.pagedown"
  "b" =      "diff.pageup"
  "esc" =    "close diff"
[bindings.set_parents]
  "j" =      "revisions.down"
  "k" =      "revisions.up"
  " " =      "set_parents.toggle_select"
  "enter" =  "set_parents.apply"
  "esc" =    "close set_parents"
[bindings.abandon]
  "y" = "abandon.accept"
  "alt+enter" = "abandon.force_apply"
  "n" =   "close abandon"
  "esc" = "close abandon"
[bindings.inline_describe]
  "esc" = "close inline_describe"
  "alt+enter" = "inline_describe.accept"
[bindings.squash]
  "j" = "revisions.down"
  "k" = "revisions.up"
  "i" = "squash.interactive"
  "e" = "squash.keep_emptied"
  "esc" = "close squash"
  "enter" = "squash.apply"
  "alt+enter" = "squash.force_apply"
[bindings.revert]
  "j" = "revisions.down"
  "k" = "revisions.up"
  "i" = "revert.insert"
  "a" = "revert.after"
  "b" = "revert.before"
  "d" = "revert.onto"
  "esc" = "close revert"
  "enter" = "revert.apply"
[bindings.undo]
  "y" = "undo.accept"
  "n" = "undo.close"
  "esc" = "undo.close"
[bindings.ace_jump]
  "esc" = "close ace_jump"
  "enter" = "ace_jump.apply"
[bindings.bookmarks]
  "j" = "bookmarks.down"
  "k" = "bookmarks.up"
  "B" = "bookmarks.set"
  "d" = "bookmarks.filter_delete"
  "m" = "bookmarks.filter_move"
  "f" = "bookmarks.filter_forget"
  "t" = "bookmarks.filter_track"
  "u" = "bookmarks.filter_untrack"
  "enter" = "bookmarks.apply"
  "esc" = "close bookmarks"
[bindings.git]
  "j" = "git.down"
  "k" = "git.up"
  "p" = "git.push"
  "f" = "git.fetch"
  "enter" = "git.apply"
  "esc" = "close git"
[bindings.help]
  "esc" = "close help"
[bindings.set_bookmark]
  "esc"   = "close set_bookmark"
  "enter" = "set_bookmark.accept"
