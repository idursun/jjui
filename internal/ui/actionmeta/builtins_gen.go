// Code generated by cmd/genactions; DO NOT EDIT.
package actionmeta

import (
	"fmt"
	"strings"
)

type ActionMetadata struct {
	Action      string
	Description string
	Owners      []string
	Args        map[string]string
}

var builtInActions = map[string]struct{}{
	"file_search.apply":                          {},
	"file_search.cancel":                         {},
	"file_search.edit":                           {},
	"file_search.move_down":                      {},
	"file_search.move_up":                        {},
	"file_search.page_down":                      {},
	"file_search.page_up":                        {},
	"file_search.preview_half_page_down":         {},
	"file_search.preview_half_page_up":           {},
	"file_search.toggle":                         {},
	"input.apply":                                {},
	"input.cancel":                               {},
	"password.apply":                             {},
	"password.cancel":                            {},
	"revisions.abandon":                          {},
	"revisions.abandon.ace_jump":                 {},
	"revisions.abandon.apply":                    {},
	"revisions.abandon.cancel":                   {},
	"revisions.abandon.force_apply":              {},
	"revisions.abandon.toggle_select":            {},
	"revisions.absorb":                           {},
	"revisions.ace_jump":                         {},
	"revisions.ace_jump.apply":                   {},
	"revisions.ace_jump.cancel":                  {},
	"revisions.apply":                            {},
	"revisions.bookmark_set":                     {},
	"revisions.commit":                           {},
	"revisions.describe":                         {},
	"revisions.details.absorb":                   {},
	"revisions.details.cancel":                   {},
	"revisions.details.confirmation.apply":       {},
	"revisions.details.confirmation.cancel":      {},
	"revisions.details.confirmation.force_apply": {},
	"revisions.details.confirmation.next":        {},
	"revisions.details.confirmation.prev":        {},
	"revisions.details.diff":                     {},
	"revisions.details.move_down":                {},
	"revisions.details.move_up":                  {},
	"revisions.details.quit":                     {},
	"revisions.details.refresh":                  {},
	"revisions.details.restore":                  {},
	"revisions.details.revisions_changing_file":  {},
	"revisions.details.split":                    {},
	"revisions.details.split_parallel":           {},
	"revisions.details.squash":                   {},
	"revisions.details.toggle_select":            {},
	"revisions.diff":                             {},
	"revisions.diff_edit":                        {},
	"revisions.duplicate.ace_jump":               {},
	"revisions.duplicate.apply":                  {},
	"revisions.duplicate.cancel":                 {},
	"revisions.duplicate.force_apply":            {},
	"revisions.duplicate.set_target":             {},
	"revisions.duplicate.target":                 {},
	"revisions.edit":                             {},
	"revisions.evolog.apply":                     {},
	"revisions.evolog.cancel":                    {},
	"revisions.evolog.diff":                      {},
	"revisions.evolog.move_down":                 {},
	"revisions.evolog.move_up":                   {},
	"revisions.evolog.quit":                      {},
	"revisions.evolog.restore":                   {},
	"revisions.force_apply":                      {},
	"revisions.force_edit":                       {},
	"revisions.inline_describe":                  {},
	"revisions.inline_describe.accept":           {},
	"revisions.inline_describe.cancel":           {},
	"revisions.inline_describe.editor":           {},
	"revisions.jump_to_children":                 {},
	"revisions.jump_to_parent":                   {},
	"revisions.jump_to_working_copy":             {},
	"revisions.move_down":                        {},
	"revisions.move_up":                          {},
	"revisions.new":                              {},
	"revisions.open_details":                     {},
	"revisions.open_duplicate":                   {},
	"revisions.open_evolog":                      {},
	"revisions.open_rebase":                      {},
	"revisions.open_revert":                      {},
	"revisions.open_squash":                      {},
	"revisions.page_down":                        {},
	"revisions.page_up":                          {},
	"revisions.quick_search.input.apply":         {},
	"revisions.quick_search.input.cancel":        {},
	"revisions.quick_search_clear":               {},
	"revisions.quick_search_next":                {},
	"revisions.quick_search_prev":                {},
	"revisions.rebase.ace_jump":                  {},
	"revisions.rebase.apply":                     {},
	"revisions.rebase.cancel":                    {},
	"revisions.rebase.force_apply":               {},
	"revisions.rebase.set_source":                {},
	"revisions.rebase.set_target":                {},
	"revisions.rebase.skip_emptied":              {},
	"revisions.rebase.target":                    {},
	"revisions.refresh":                          {},
	"revisions.revert.apply":                     {},
	"revisions.revert.cancel":                    {},
	"revisions.revert.force_apply":               {},
	"revisions.revert.set_target":                {},
	"revisions.revert.target":                    {},
	"revisions.set_bookmark.apply":               {},
	"revisions.set_bookmark.autocomplete":        {},
	"revisions.set_bookmark.autocomplete_back":   {},
	"revisions.set_bookmark.cancel":              {},
	"revisions.set_parents":                      {},
	"revisions.set_parents.ace_jump":             {},
	"revisions.set_parents.apply":                {},
	"revisions.set_parents.cancel":               {},
	"revisions.set_parents.toggle_select":        {},
	"revisions.split":                            {},
	"revisions.split_parallel":                   {},
	"revisions.squash.ace_jump":                  {},
	"revisions.squash.apply":                     {},
	"revisions.squash.cancel":                    {},
	"revisions.squash.force_apply":               {},
	"revisions.squash.interactive":               {},
	"revisions.squash.keep_emptied":              {},
	"revisions.squash.target":                    {},
	"revisions.squash.use_destination_msg":       {},
	"revisions.target_picker.apply":              {},
	"revisions.target_picker.autocomplete":       {},
	"revisions.target_picker.autocomplete_back":  {},
	"revisions.target_picker.cancel":             {},
	"revisions.target_picker.force_apply":        {},
	"revisions.target_picker.move_down":          {},
	"revisions.target_picker.move_up":            {},
	"revisions.toggle_select":                    {},
	"revset.apply":                               {},
	"revset.autocomplete":                        {},
	"revset.autocomplete_back":                   {},
	"revset.cancel":                              {},
	"revset.move_down":                           {},
	"revset.move_up":                             {},
	"status.input.apply":                         {},
	"status.input.autocomplete":                  {},
	"status.input.cancel":                        {},
	"status.input.move_down":                     {},
	"status.input.move_up":                       {},
	"status.input.page_down":                     {},
	"status.input.page_up":                       {},
	"ui.bookmarks.apply":                         {},
	"ui.bookmarks.bookmark_delete":               {},
	"ui.bookmarks.bookmark_forget":               {},
	"ui.bookmarks.bookmark_move":                 {},
	"ui.bookmarks.bookmark_track":                {},
	"ui.bookmarks.bookmark_untrack":              {},
	"ui.bookmarks.cancel":                        {},
	"ui.bookmarks.cycle_remotes":                 {},
	"ui.bookmarks.cycle_remotes_back":            {},
	"ui.bookmarks.filter":                        {},
	"ui.bookmarks.move_down":                     {},
	"ui.bookmarks.move_up":                       {},
	"ui.bookmarks.page_down":                     {},
	"ui.bookmarks.page_up":                       {},
	"ui.bookmarks.quit":                          {},
	"ui.cancel":                                  {},
	"ui.choose.apply":                            {},
	"ui.choose.cancel":                           {},
	"ui.choose.move_down":                        {},
	"ui.choose.move_up":                          {},
	"ui.diff.half_page_down":                     {},
	"ui.diff.half_page_up":                       {},
	"ui.diff.left":                               {},
	"ui.diff.page_down":                          {},
	"ui.diff.page_up":                            {},
	"ui.diff.right":                              {},
	"ui.diff.scroll_down":                        {},
	"ui.diff.scroll_up":                          {},
	"ui.exec_jj":                                 {},
	"ui.exec_shell":                              {},
	"ui.expand_status":                           {},
	"ui.file_search_toggle":                      {},
	"ui.git.apply":                               {},
	"ui.git.cancel":                              {},
	"ui.git.cycle_remotes":                       {},
	"ui.git.cycle_remotes_back":                  {},
	"ui.git.fetch":                               {},
	"ui.git.filter":                              {},
	"ui.git.move_down":                           {},
	"ui.git.move_up":                             {},
	"ui.git.page_down":                           {},
	"ui.git.page_up":                             {},
	"ui.git.push":                                {},
	"ui.git.quit":                                {},
	"ui.open_bookmarks":                          {},
	"ui.open_git":                                {},
	"ui.open_oplog":                              {},
	"ui.open_revset":                             {},
	"ui.oplog.close":                             {},
	"ui.oplog.diff":                              {},
	"ui.oplog.move_down":                         {},
	"ui.oplog.move_up":                           {},
	"ui.oplog.page_down":                         {},
	"ui.oplog.page_up":                           {},
	"ui.oplog.quit":                              {},
	"ui.oplog.restore":                           {},
	"ui.oplog.revert":                            {},
	"ui.preview_expand":                          {},
	"ui.preview_half_page_down":                  {},
	"ui.preview_half_page_up":                    {},
	"ui.preview_scroll_down":                     {},
	"ui.preview_scroll_up":                       {},
	"ui.preview_shrink":                          {},
	"ui.preview_toggle":                          {},
	"ui.preview_toggle_bottom":                   {},
	"ui.quick_search":                            {},
	"ui.quit":                                    {},
	"ui.redo":                                    {},
	"ui.redo.apply":                              {},
	"ui.redo.cancel":                             {},
	"ui.redo.next":                               {},
	"ui.redo.prev":                               {},
	"ui.suspend":                                 {},
	"ui.undo":                                    {},
	"ui.undo.apply":                              {},
	"ui.undo.cancel":                             {},
	"ui.undo.next":                               {},
	"ui.undo.prev":                               {},
}

var builtInActionOwners = map[string][]string{
	"file_search.apply":                          {"file_search"},
	"file_search.cancel":                         {"file_search"},
	"file_search.edit":                           {"file_search"},
	"file_search.move_down":                      {"file_search"},
	"file_search.move_up":                        {"file_search"},
	"file_search.page_down":                      {"file_search"},
	"file_search.page_up":                        {"file_search"},
	"file_search.preview_half_page_down":         {"file_search"},
	"file_search.preview_half_page_up":           {"file_search"},
	"file_search.toggle":                         {"file_search"},
	"input.apply":                                {"input"},
	"input.cancel":                               {"input"},
	"password.apply":                             {"password"},
	"password.cancel":                            {"password"},
	"revisions.abandon":                          {"revisions"},
	"revisions.abandon.ace_jump":                 {"revisions.abandon"},
	"revisions.abandon.apply":                    {"revisions.abandon"},
	"revisions.abandon.cancel":                   {"revisions.abandon"},
	"revisions.abandon.force_apply":              {"revisions.abandon"},
	"revisions.abandon.toggle_select":            {"revisions.abandon"},
	"revisions.absorb":                           {"revisions"},
	"revisions.ace_jump":                         {"revisions"},
	"revisions.ace_jump.apply":                   {"revisions.ace_jump"},
	"revisions.ace_jump.cancel":                  {"revisions.ace_jump"},
	"revisions.apply":                            {"revisions"},
	"revisions.bookmark_set":                     {"revisions"},
	"revisions.commit":                           {"revisions"},
	"revisions.describe":                         {"revisions"},
	"revisions.details.absorb":                   {"revisions.details"},
	"revisions.details.cancel":                   {"revisions.details"},
	"revisions.details.confirmation.apply":       {"revisions.details.confirmation"},
	"revisions.details.confirmation.cancel":      {"revisions.details.confirmation"},
	"revisions.details.confirmation.force_apply": {"revisions.details.confirmation"},
	"revisions.details.confirmation.next":        {"revisions.details.confirmation"},
	"revisions.details.confirmation.prev":        {"revisions.details.confirmation"},
	"revisions.details.diff":                     {"revisions.details"},
	"revisions.details.move_down":                {"revisions.details"},
	"revisions.details.move_up":                  {"revisions.details"},
	"revisions.details.quit":                     {"revisions.details"},
	"revisions.details.refresh":                  {"revisions.details"},
	"revisions.details.restore":                  {"revisions.details"},
	"revisions.details.revisions_changing_file":  {"revisions.details"},
	"revisions.details.split":                    {"revisions.details"},
	"revisions.details.split_parallel":           {"revisions.details"},
	"revisions.details.squash":                   {"revisions.details"},
	"revisions.details.toggle_select":            {"revisions.details"},
	"revisions.diff":                             {"revisions"},
	"revisions.diff_edit":                        {"revisions"},
	"revisions.duplicate.ace_jump":               {"revisions.duplicate"},
	"revisions.duplicate.apply":                  {"revisions.duplicate"},
	"revisions.duplicate.cancel":                 {"revisions.duplicate"},
	"revisions.duplicate.force_apply":            {"revisions.duplicate"},
	"revisions.duplicate.set_target":             {"revisions.duplicate"},
	"revisions.duplicate.target":                 {"revisions.duplicate"},
	"revisions.edit":                             {"revisions"},
	"revisions.evolog.apply":                     {"revisions.evolog"},
	"revisions.evolog.cancel":                    {"revisions.evolog"},
	"revisions.evolog.diff":                      {"revisions.evolog"},
	"revisions.evolog.move_down":                 {"revisions.evolog"},
	"revisions.evolog.move_up":                   {"revisions.evolog"},
	"revisions.evolog.quit":                      {"revisions.evolog"},
	"revisions.evolog.restore":                   {"revisions.evolog"},
	"revisions.force_apply":                      {"revisions"},
	"revisions.force_edit":                       {"revisions"},
	"revisions.inline_describe":                  {"revisions"},
	"revisions.inline_describe.accept":           {"revisions.inline_describe"},
	"revisions.inline_describe.cancel":           {"revisions.inline_describe"},
	"revisions.inline_describe.editor":           {"revisions.inline_describe"},
	"revisions.jump_to_children":                 {"revisions"},
	"revisions.jump_to_parent":                   {"revisions"},
	"revisions.jump_to_working_copy":             {"revisions"},
	"revisions.move_down":                        {"revisions"},
	"revisions.move_up":                          {"revisions"},
	"revisions.new":                              {"revisions"},
	"revisions.open_details":                     {"revisions"},
	"revisions.open_duplicate":                   {"revisions"},
	"revisions.open_evolog":                      {"revisions"},
	"revisions.open_rebase":                      {"revisions"},
	"revisions.open_revert":                      {"revisions"},
	"revisions.open_squash":                      {"revisions"},
	"revisions.page_down":                        {"revisions"},
	"revisions.page_up":                          {"revisions"},
	"revisions.quick_search.input.apply":         {"revisions.quick_search.input"},
	"revisions.quick_search.input.cancel":        {"revisions.quick_search.input"},
	"revisions.quick_search_clear":               {"revisions"},
	"revisions.quick_search_next":                {"revisions"},
	"revisions.quick_search_prev":                {"revisions"},
	"revisions.rebase.ace_jump":                  {"revisions.rebase"},
	"revisions.rebase.apply":                     {"revisions.rebase"},
	"revisions.rebase.cancel":                    {"revisions.rebase"},
	"revisions.rebase.force_apply":               {"revisions.rebase"},
	"revisions.rebase.set_source":                {"revisions.rebase"},
	"revisions.rebase.set_target":                {"revisions.rebase"},
	"revisions.rebase.skip_emptied":              {"revisions.rebase"},
	"revisions.rebase.target":                    {"revisions.rebase"},
	"revisions.refresh":                          {"revisions"},
	"revisions.revert.apply":                     {"revisions.revert"},
	"revisions.revert.cancel":                    {"revisions.revert"},
	"revisions.revert.force_apply":               {"revisions.revert"},
	"revisions.revert.set_target":                {"revisions.revert"},
	"revisions.revert.target":                    {"revisions.revert"},
	"revisions.set_bookmark.apply":               {"revisions.set_bookmark"},
	"revisions.set_bookmark.autocomplete":        {"revisions.set_bookmark"},
	"revisions.set_bookmark.autocomplete_back":   {"revisions.set_bookmark"},
	"revisions.set_bookmark.cancel":              {"revisions.set_bookmark"},
	"revisions.set_parents":                      {"revisions"},
	"revisions.set_parents.ace_jump":             {"revisions.set_parents"},
	"revisions.set_parents.apply":                {"revisions.set_parents"},
	"revisions.set_parents.cancel":               {"revisions.set_parents"},
	"revisions.set_parents.toggle_select":        {"revisions.set_parents"},
	"revisions.split":                            {"revisions"},
	"revisions.split_parallel":                   {"revisions"},
	"revisions.squash.ace_jump":                  {"revisions.squash"},
	"revisions.squash.apply":                     {"revisions.squash"},
	"revisions.squash.cancel":                    {"revisions.squash"},
	"revisions.squash.force_apply":               {"revisions.squash"},
	"revisions.squash.interactive":               {"revisions.squash"},
	"revisions.squash.keep_emptied":              {"revisions.squash"},
	"revisions.squash.target":                    {"revisions.squash"},
	"revisions.squash.use_destination_msg":       {"revisions.squash"},
	"revisions.target_picker.apply":              {"revisions.target_picker"},
	"revisions.target_picker.autocomplete":       {"revisions.target_picker"},
	"revisions.target_picker.autocomplete_back":  {"revisions.target_picker"},
	"revisions.target_picker.cancel":             {"revisions.target_picker"},
	"revisions.target_picker.force_apply":        {"revisions.target_picker"},
	"revisions.target_picker.move_down":          {"revisions.target_picker"},
	"revisions.target_picker.move_up":            {"revisions.target_picker"},
	"revisions.toggle_select":                    {"revisions"},
	"revset.apply":                               {"revset"},
	"revset.autocomplete":                        {"revset"},
	"revset.autocomplete_back":                   {"revset"},
	"revset.cancel":                              {"revset"},
	"revset.move_down":                           {"revset"},
	"revset.move_up":                             {"revset"},
	"status.input.apply":                         {"status.input"},
	"status.input.autocomplete":                  {"status.input"},
	"status.input.cancel":                        {"status.input"},
	"status.input.move_down":                     {"status.input"},
	"status.input.move_up":                       {"status.input"},
	"status.input.page_down":                     {"status.input"},
	"status.input.page_up":                       {"status.input"},
	"ui.bookmarks.apply":                         {"ui.bookmarks"},
	"ui.bookmarks.bookmark_delete":               {"ui.bookmarks"},
	"ui.bookmarks.bookmark_forget":               {"ui.bookmarks"},
	"ui.bookmarks.bookmark_move":                 {"ui.bookmarks"},
	"ui.bookmarks.bookmark_track":                {"ui.bookmarks"},
	"ui.bookmarks.bookmark_untrack":              {"ui.bookmarks"},
	"ui.bookmarks.cancel":                        {"ui.bookmarks"},
	"ui.bookmarks.cycle_remotes":                 {"ui.bookmarks"},
	"ui.bookmarks.cycle_remotes_back":            {"ui.bookmarks"},
	"ui.bookmarks.filter":                        {"ui.bookmarks"},
	"ui.bookmarks.move_down":                     {"ui.bookmarks"},
	"ui.bookmarks.move_up":                       {"ui.bookmarks"},
	"ui.bookmarks.page_down":                     {"ui.bookmarks"},
	"ui.bookmarks.page_up":                       {"ui.bookmarks"},
	"ui.bookmarks.quit":                          {"ui.bookmarks"},
	"ui.cancel":                                  {"ui"},
	"ui.choose.apply":                            {"ui.choose"},
	"ui.choose.cancel":                           {"ui.choose"},
	"ui.choose.move_down":                        {"ui.choose"},
	"ui.choose.move_up":                          {"ui.choose"},
	"ui.diff.half_page_down":                     {"ui.diff"},
	"ui.diff.half_page_up":                       {"ui.diff"},
	"ui.diff.left":                               {"ui.diff"},
	"ui.diff.page_down":                          {"ui.diff"},
	"ui.diff.page_up":                            {"ui.diff"},
	"ui.diff.right":                              {"ui.diff"},
	"ui.diff.scroll_down":                        {"ui.diff"},
	"ui.diff.scroll_up":                          {"ui.diff"},
	"ui.exec_jj":                                 {"ui"},
	"ui.exec_shell":                              {"ui"},
	"ui.expand_status":                           {"ui"},
	"ui.file_search_toggle":                      {"ui"},
	"ui.git.apply":                               {"ui.git"},
	"ui.git.cancel":                              {"ui.git"},
	"ui.git.cycle_remotes":                       {"ui.git"},
	"ui.git.cycle_remotes_back":                  {"ui.git"},
	"ui.git.fetch":                               {"ui.git"},
	"ui.git.filter":                              {"ui.git"},
	"ui.git.move_down":                           {"ui.git"},
	"ui.git.move_up":                             {"ui.git"},
	"ui.git.page_down":                           {"ui.git"},
	"ui.git.page_up":                             {"ui.git"},
	"ui.git.push":                                {"ui.git"},
	"ui.git.quit":                                {"ui.git"},
	"ui.open_bookmarks":                          {"ui"},
	"ui.open_git":                                {"ui"},
	"ui.open_oplog":                              {"ui"},
	"ui.open_revset":                             {"ui"},
	"ui.oplog.close":                             {"ui.oplog"},
	"ui.oplog.diff":                              {"ui.oplog"},
	"ui.oplog.move_down":                         {"ui.oplog"},
	"ui.oplog.move_up":                           {"ui.oplog"},
	"ui.oplog.page_down":                         {"ui.oplog"},
	"ui.oplog.page_up":                           {"ui.oplog"},
	"ui.oplog.quit":                              {"ui.oplog"},
	"ui.oplog.restore":                           {"ui.oplog"},
	"ui.oplog.revert":                            {"ui.oplog"},
	"ui.preview_expand":                          {"ui"},
	"ui.preview_half_page_down":                  {"ui"},
	"ui.preview_half_page_up":                    {"ui"},
	"ui.preview_scroll_down":                     {"ui"},
	"ui.preview_scroll_up":                       {"ui"},
	"ui.preview_shrink":                          {"ui"},
	"ui.preview_toggle":                          {"ui"},
	"ui.preview_toggle_bottom":                   {"ui"},
	"ui.quick_search":                            {"ui"},
	"ui.quit":                                    {"ui"},
	"ui.redo":                                    {"ui"},
	"ui.redo.apply":                              {"ui.redo"},
	"ui.redo.cancel":                             {"ui.redo"},
	"ui.redo.next":                               {"ui.redo"},
	"ui.redo.prev":                               {"ui.redo"},
	"ui.suspend":                                 {"ui"},
	"ui.undo":                                    {"ui"},
	"ui.undo.apply":                              {"ui.undo"},
	"ui.undo.cancel":                             {"ui.undo"},
	"ui.undo.next":                               {"ui.undo"},
	"ui.undo.prev":                               {"ui.undo"},
}

var builtInActionTokens = map[string]string{
	"file_search.apply":                          "apply",
	"file_search.cancel":                         "cancel",
	"file_search.edit":                           "edit",
	"file_search.move_down":                      "move_down",
	"file_search.move_up":                        "move_up",
	"file_search.page_down":                      "page_down",
	"file_search.page_up":                        "page_up",
	"file_search.preview_half_page_down":         "preview_half_page_down",
	"file_search.preview_half_page_up":           "preview_half_page_up",
	"file_search.toggle":                         "toggle",
	"input.apply":                                "apply",
	"input.cancel":                               "cancel",
	"password.apply":                             "apply",
	"password.cancel":                            "cancel",
	"revisions.abandon":                          "abandon",
	"revisions.abandon.ace_jump":                 "ace_jump",
	"revisions.abandon.apply":                    "apply",
	"revisions.abandon.cancel":                   "cancel",
	"revisions.abandon.force_apply":              "force_apply",
	"revisions.abandon.toggle_select":            "toggle_select",
	"revisions.absorb":                           "absorb",
	"revisions.ace_jump":                         "ace_jump",
	"revisions.ace_jump.apply":                   "apply",
	"revisions.ace_jump.cancel":                  "cancel",
	"revisions.apply":                            "apply",
	"revisions.bookmark_set":                     "bookmark_set",
	"revisions.commit":                           "commit",
	"revisions.describe":                         "describe",
	"revisions.details.absorb":                   "absorb",
	"revisions.details.cancel":                   "cancel",
	"revisions.details.confirmation.apply":       "apply",
	"revisions.details.confirmation.cancel":      "cancel",
	"revisions.details.confirmation.force_apply": "force_apply",
	"revisions.details.confirmation.next":        "next",
	"revisions.details.confirmation.prev":        "prev",
	"revisions.details.diff":                     "diff",
	"revisions.details.move_down":                "move_down",
	"revisions.details.move_up":                  "move_up",
	"revisions.details.quit":                     "quit",
	"revisions.details.refresh":                  "refresh",
	"revisions.details.restore":                  "restore",
	"revisions.details.revisions_changing_file":  "revisions_changing_file",
	"revisions.details.split":                    "split",
	"revisions.details.split_parallel":           "split_parallel",
	"revisions.details.squash":                   "squash",
	"revisions.details.toggle_select":            "toggle_select",
	"revisions.diff":                             "diff",
	"revisions.diff_edit":                        "diff_edit",
	"revisions.duplicate.ace_jump":               "ace_jump",
	"revisions.duplicate.apply":                  "apply",
	"revisions.duplicate.cancel":                 "cancel",
	"revisions.duplicate.force_apply":            "force_apply",
	"revisions.duplicate.set_target":             "set_target",
	"revisions.duplicate.target":                 "target",
	"revisions.edit":                             "edit",
	"revisions.evolog.apply":                     "apply",
	"revisions.evolog.cancel":                    "cancel",
	"revisions.evolog.diff":                      "diff",
	"revisions.evolog.move_down":                 "move_down",
	"revisions.evolog.move_up":                   "move_up",
	"revisions.evolog.quit":                      "quit",
	"revisions.evolog.restore":                   "restore",
	"revisions.force_apply":                      "force_apply",
	"revisions.force_edit":                       "force_edit",
	"revisions.inline_describe":                  "inline_describe",
	"revisions.inline_describe.accept":           "accept",
	"revisions.inline_describe.cancel":           "cancel",
	"revisions.inline_describe.editor":           "editor",
	"revisions.jump_to_children":                 "jump_to_children",
	"revisions.jump_to_parent":                   "jump_to_parent",
	"revisions.jump_to_working_copy":             "jump_to_working_copy",
	"revisions.move_down":                        "move_down",
	"revisions.move_up":                          "move_up",
	"revisions.new":                              "new",
	"revisions.open_details":                     "open_details",
	"revisions.open_duplicate":                   "open_duplicate",
	"revisions.open_evolog":                      "open_evolog",
	"revisions.open_rebase":                      "open_rebase",
	"revisions.open_revert":                      "open_revert",
	"revisions.open_squash":                      "open_squash",
	"revisions.page_down":                        "page_down",
	"revisions.page_up":                          "page_up",
	"revisions.quick_search.input.apply":         "apply",
	"revisions.quick_search.input.cancel":        "cancel",
	"revisions.quick_search_clear":               "quick_search_clear",
	"revisions.quick_search_next":                "quick_search_next",
	"revisions.quick_search_prev":                "quick_search_prev",
	"revisions.rebase.ace_jump":                  "ace_jump",
	"revisions.rebase.apply":                     "apply",
	"revisions.rebase.cancel":                    "cancel",
	"revisions.rebase.force_apply":               "force_apply",
	"revisions.rebase.set_source":                "set_source",
	"revisions.rebase.set_target":                "set_target",
	"revisions.rebase.skip_emptied":              "skip_emptied",
	"revisions.rebase.target":                    "target",
	"revisions.refresh":                          "refresh",
	"revisions.revert.apply":                     "apply",
	"revisions.revert.cancel":                    "cancel",
	"revisions.revert.force_apply":               "force_apply",
	"revisions.revert.set_target":                "set_target",
	"revisions.revert.target":                    "target",
	"revisions.set_bookmark.apply":               "apply",
	"revisions.set_bookmark.autocomplete":        "autocomplete",
	"revisions.set_bookmark.autocomplete_back":   "autocomplete_back",
	"revisions.set_bookmark.cancel":              "cancel",
	"revisions.set_parents":                      "set_parents",
	"revisions.set_parents.ace_jump":             "ace_jump",
	"revisions.set_parents.apply":                "apply",
	"revisions.set_parents.cancel":               "cancel",
	"revisions.set_parents.toggle_select":        "toggle_select",
	"revisions.split":                            "split",
	"revisions.split_parallel":                   "split_parallel",
	"revisions.squash.ace_jump":                  "ace_jump",
	"revisions.squash.apply":                     "apply",
	"revisions.squash.cancel":                    "cancel",
	"revisions.squash.force_apply":               "force_apply",
	"revisions.squash.interactive":               "interactive",
	"revisions.squash.keep_emptied":              "keep_emptied",
	"revisions.squash.target":                    "target",
	"revisions.squash.use_destination_msg":       "use_destination_msg",
	"revisions.target_picker.apply":              "apply",
	"revisions.target_picker.autocomplete":       "autocomplete",
	"revisions.target_picker.autocomplete_back":  "autocomplete_back",
	"revisions.target_picker.cancel":             "cancel",
	"revisions.target_picker.force_apply":        "force_apply",
	"revisions.target_picker.move_down":          "move_down",
	"revisions.target_picker.move_up":            "move_up",
	"revisions.toggle_select":                    "toggle_select",
	"revset.apply":                               "apply",
	"revset.autocomplete":                        "autocomplete",
	"revset.autocomplete_back":                   "autocomplete_back",
	"revset.cancel":                              "cancel",
	"revset.move_down":                           "move_down",
	"revset.move_up":                             "move_up",
	"status.input.apply":                         "apply",
	"status.input.autocomplete":                  "autocomplete",
	"status.input.cancel":                        "cancel",
	"status.input.move_down":                     "move_down",
	"status.input.move_up":                       "move_up",
	"status.input.page_down":                     "page_down",
	"status.input.page_up":                       "page_up",
	"ui.bookmarks.apply":                         "apply",
	"ui.bookmarks.bookmark_delete":               "bookmark_delete",
	"ui.bookmarks.bookmark_forget":               "bookmark_forget",
	"ui.bookmarks.bookmark_move":                 "bookmark_move",
	"ui.bookmarks.bookmark_track":                "bookmark_track",
	"ui.bookmarks.bookmark_untrack":              "bookmark_untrack",
	"ui.bookmarks.cancel":                        "cancel",
	"ui.bookmarks.cycle_remotes":                 "cycle_remotes",
	"ui.bookmarks.cycle_remotes_back":            "cycle_remotes_back",
	"ui.bookmarks.filter":                        "filter",
	"ui.bookmarks.move_down":                     "move_down",
	"ui.bookmarks.move_up":                       "move_up",
	"ui.bookmarks.page_down":                     "page_down",
	"ui.bookmarks.page_up":                       "page_up",
	"ui.bookmarks.quit":                          "quit",
	"ui.cancel":                                  "cancel",
	"ui.choose.apply":                            "apply",
	"ui.choose.cancel":                           "cancel",
	"ui.choose.move_down":                        "move_down",
	"ui.choose.move_up":                          "move_up",
	"ui.diff.half_page_down":                     "half_page_down",
	"ui.diff.half_page_up":                       "half_page_up",
	"ui.diff.left":                               "left",
	"ui.diff.page_down":                          "page_down",
	"ui.diff.page_up":                            "page_up",
	"ui.diff.right":                              "right",
	"ui.diff.scroll_down":                        "scroll_down",
	"ui.diff.scroll_up":                          "scroll_up",
	"ui.exec_jj":                                 "exec_jj",
	"ui.exec_shell":                              "exec_shell",
	"ui.expand_status":                           "expand_status",
	"ui.file_search_toggle":                      "file_search_toggle",
	"ui.git.apply":                               "apply",
	"ui.git.cancel":                              "cancel",
	"ui.git.cycle_remotes":                       "cycle_remotes",
	"ui.git.cycle_remotes_back":                  "cycle_remotes_back",
	"ui.git.fetch":                               "fetch",
	"ui.git.filter":                              "filter",
	"ui.git.move_down":                           "move_down",
	"ui.git.move_up":                             "move_up",
	"ui.git.page_down":                           "page_down",
	"ui.git.page_up":                             "page_up",
	"ui.git.push":                                "push",
	"ui.git.quit":                                "quit",
	"ui.open_bookmarks":                          "open_bookmarks",
	"ui.open_git":                                "open_git",
	"ui.open_oplog":                              "open_oplog",
	"ui.open_revset":                             "open_revset",
	"ui.oplog.close":                             "close",
	"ui.oplog.diff":                              "diff",
	"ui.oplog.move_down":                         "move_down",
	"ui.oplog.move_up":                           "move_up",
	"ui.oplog.page_down":                         "page_down",
	"ui.oplog.page_up":                           "page_up",
	"ui.oplog.quit":                              "quit",
	"ui.oplog.restore":                           "restore",
	"ui.oplog.revert":                            "revert",
	"ui.preview_expand":                          "preview_expand",
	"ui.preview_half_page_down":                  "preview_half_page_down",
	"ui.preview_half_page_up":                    "preview_half_page_up",
	"ui.preview_scroll_down":                     "preview_scroll_down",
	"ui.preview_scroll_up":                       "preview_scroll_up",
	"ui.preview_shrink":                          "preview_shrink",
	"ui.preview_toggle":                          "preview_toggle",
	"ui.preview_toggle_bottom":                   "preview_toggle_bottom",
	"ui.quick_search":                            "quick_search",
	"ui.quit":                                    "quit",
	"ui.redo":                                    "redo",
	"ui.redo.apply":                              "apply",
	"ui.redo.cancel":                             "cancel",
	"ui.redo.next":                               "next",
	"ui.redo.prev":                               "prev",
	"ui.suspend":                                 "suspend",
	"ui.undo":                                    "undo",
	"ui.undo.apply":                              "apply",
	"ui.undo.cancel":                             "cancel",
	"ui.undo.next":                               "next",
	"ui.undo.prev":                               "prev",
}

var builtInActionArgSchemas = map[string]map[string]string{
	"revisions.abandon.apply": {
		"force": "bool",
	},
	"revisions.apply": {
		"force": "bool",
	},
	"revisions.details.confirmation.apply": {
		"force": "bool",
	},
	"revisions.duplicate.apply": {
		"force": "bool",
	},
	"revisions.duplicate.set_target": {
		"target": "enum:onto|after|before",
	},
	"revisions.evolog.apply": {
		"force": "bool",
	},
	"revisions.rebase.apply": {
		"force": "bool",
	},
	"revisions.rebase.set_source": {
		"source": "enum:revision|branch|source",
	},
	"revisions.rebase.set_target": {
		"target": "enum:onto|after|before|insert",
	},
	"revisions.revert.apply": {
		"force": "bool",
	},
	"revisions.revert.set_target": {
		"target": "enum:onto|after|before|insert",
	},
	"revisions.squash.apply": {
		"force": "bool",
	},
	"revisions.target_picker.apply": {
		"force": "bool",
	},
}

var builtInActionRequiredArgs = map[string][]string{
	"revisions.duplicate.set_target": {"target"},
	"revisions.rebase.set_source":    {"source"},
	"revisions.rebase.set_target":    {"target"},
	"revisions.revert.set_target":    {"target"},
}

var builtInActionOrder = []string{
	"file_search.apply",
	"file_search.cancel",
	"file_search.edit",
	"file_search.move_down",
	"file_search.move_up",
	"file_search.page_down",
	"file_search.page_up",
	"file_search.preview_half_page_down",
	"file_search.preview_half_page_up",
	"file_search.toggle",
	"input.apply",
	"input.cancel",
	"password.apply",
	"password.cancel",
	"revisions.abandon",
	"revisions.abandon.ace_jump",
	"revisions.abandon.apply",
	"revisions.abandon.cancel",
	"revisions.abandon.force_apply",
	"revisions.abandon.toggle_select",
	"revisions.absorb",
	"revisions.ace_jump",
	"revisions.ace_jump.apply",
	"revisions.ace_jump.cancel",
	"revisions.apply",
	"revisions.bookmark_set",
	"revisions.commit",
	"revisions.describe",
	"revisions.details.absorb",
	"revisions.details.cancel",
	"revisions.details.confirmation.apply",
	"revisions.details.confirmation.cancel",
	"revisions.details.confirmation.force_apply",
	"revisions.details.confirmation.next",
	"revisions.details.confirmation.prev",
	"revisions.details.diff",
	"revisions.details.move_down",
	"revisions.details.move_up",
	"revisions.details.quit",
	"revisions.details.refresh",
	"revisions.details.restore",
	"revisions.details.revisions_changing_file",
	"revisions.details.split",
	"revisions.details.split_parallel",
	"revisions.details.squash",
	"revisions.details.toggle_select",
	"revisions.diff",
	"revisions.diff_edit",
	"revisions.duplicate.ace_jump",
	"revisions.duplicate.apply",
	"revisions.duplicate.cancel",
	"revisions.duplicate.force_apply",
	"revisions.duplicate.set_target",
	"revisions.duplicate.target",
	"revisions.edit",
	"revisions.evolog.apply",
	"revisions.evolog.cancel",
	"revisions.evolog.diff",
	"revisions.evolog.move_down",
	"revisions.evolog.move_up",
	"revisions.evolog.quit",
	"revisions.evolog.restore",
	"revisions.force_apply",
	"revisions.force_edit",
	"revisions.inline_describe",
	"revisions.inline_describe.accept",
	"revisions.inline_describe.cancel",
	"revisions.inline_describe.editor",
	"revisions.jump_to_children",
	"revisions.jump_to_parent",
	"revisions.jump_to_working_copy",
	"revisions.move_down",
	"revisions.move_up",
	"revisions.new",
	"revisions.open_details",
	"revisions.open_duplicate",
	"revisions.open_evolog",
	"revisions.open_rebase",
	"revisions.open_revert",
	"revisions.open_squash",
	"revisions.page_down",
	"revisions.page_up",
	"revisions.quick_search.input.apply",
	"revisions.quick_search.input.cancel",
	"revisions.quick_search_clear",
	"revisions.quick_search_next",
	"revisions.quick_search_prev",
	"revisions.rebase.ace_jump",
	"revisions.rebase.apply",
	"revisions.rebase.cancel",
	"revisions.rebase.force_apply",
	"revisions.rebase.set_source",
	"revisions.rebase.set_target",
	"revisions.rebase.skip_emptied",
	"revisions.rebase.target",
	"revisions.refresh",
	"revisions.revert.apply",
	"revisions.revert.cancel",
	"revisions.revert.force_apply",
	"revisions.revert.set_target",
	"revisions.revert.target",
	"revisions.set_bookmark.apply",
	"revisions.set_bookmark.autocomplete",
	"revisions.set_bookmark.autocomplete_back",
	"revisions.set_bookmark.cancel",
	"revisions.set_parents",
	"revisions.set_parents.ace_jump",
	"revisions.set_parents.apply",
	"revisions.set_parents.cancel",
	"revisions.set_parents.toggle_select",
	"revisions.split",
	"revisions.split_parallel",
	"revisions.squash.ace_jump",
	"revisions.squash.apply",
	"revisions.squash.cancel",
	"revisions.squash.force_apply",
	"revisions.squash.interactive",
	"revisions.squash.keep_emptied",
	"revisions.squash.target",
	"revisions.squash.use_destination_msg",
	"revisions.target_picker.apply",
	"revisions.target_picker.autocomplete",
	"revisions.target_picker.autocomplete_back",
	"revisions.target_picker.cancel",
	"revisions.target_picker.force_apply",
	"revisions.target_picker.move_down",
	"revisions.target_picker.move_up",
	"revisions.toggle_select",
	"revset.apply",
	"revset.autocomplete",
	"revset.autocomplete_back",
	"revset.cancel",
	"revset.move_down",
	"revset.move_up",
	"status.input.apply",
	"status.input.autocomplete",
	"status.input.cancel",
	"status.input.move_down",
	"status.input.move_up",
	"status.input.page_down",
	"status.input.page_up",
	"ui.bookmarks.apply",
	"ui.bookmarks.bookmark_delete",
	"ui.bookmarks.bookmark_forget",
	"ui.bookmarks.bookmark_move",
	"ui.bookmarks.bookmark_track",
	"ui.bookmarks.bookmark_untrack",
	"ui.bookmarks.cancel",
	"ui.bookmarks.cycle_remotes",
	"ui.bookmarks.cycle_remotes_back",
	"ui.bookmarks.filter",
	"ui.bookmarks.move_down",
	"ui.bookmarks.move_up",
	"ui.bookmarks.page_down",
	"ui.bookmarks.page_up",
	"ui.bookmarks.quit",
	"ui.cancel",
	"ui.choose.apply",
	"ui.choose.cancel",
	"ui.choose.move_down",
	"ui.choose.move_up",
	"ui.diff.half_page_down",
	"ui.diff.half_page_up",
	"ui.diff.left",
	"ui.diff.page_down",
	"ui.diff.page_up",
	"ui.diff.right",
	"ui.diff.scroll_down",
	"ui.diff.scroll_up",
	"ui.exec_jj",
	"ui.exec_shell",
	"ui.expand_status",
	"ui.file_search_toggle",
	"ui.git.apply",
	"ui.git.cancel",
	"ui.git.cycle_remotes",
	"ui.git.cycle_remotes_back",
	"ui.git.fetch",
	"ui.git.filter",
	"ui.git.move_down",
	"ui.git.move_up",
	"ui.git.page_down",
	"ui.git.page_up",
	"ui.git.push",
	"ui.git.quit",
	"ui.open_bookmarks",
	"ui.open_git",
	"ui.open_oplog",
	"ui.open_revset",
	"ui.oplog.close",
	"ui.oplog.diff",
	"ui.oplog.move_down",
	"ui.oplog.move_up",
	"ui.oplog.page_down",
	"ui.oplog.page_up",
	"ui.oplog.quit",
	"ui.oplog.restore",
	"ui.oplog.revert",
	"ui.preview_expand",
	"ui.preview_half_page_down",
	"ui.preview_half_page_up",
	"ui.preview_scroll_down",
	"ui.preview_scroll_up",
	"ui.preview_shrink",
	"ui.preview_toggle",
	"ui.preview_toggle_bottom",
	"ui.quick_search",
	"ui.quit",
	"ui.redo",
	"ui.redo.apply",
	"ui.redo.cancel",
	"ui.redo.next",
	"ui.redo.prev",
	"ui.suspend",
	"ui.undo",
	"ui.undo.apply",
	"ui.undo.cancel",
	"ui.undo.next",
	"ui.undo.prev",
}

func ActionDescription(action string) string {
	action = strings.TrimSpace(action)
	if action == "" {
		return ""
	}
	token, ok := builtInActionTokens[action]
	if !ok || token == "" {
		return ""
	}
	return strings.ReplaceAll(token, "_", " ")
}

func ActionToken(action string) string {
	action = strings.TrimSpace(action)
	return builtInActionTokens[action]
}

func ActionOwners(action string) []string {
	action = strings.TrimSpace(action)
	owners, ok := builtInActionOwners[action]
	if !ok {
		return nil
	}
	return append([]string(nil), owners...)
}

func ActionMetadataFor(action string) (ActionMetadata, bool) {
	action = strings.TrimSpace(action)
	if !IsBuiltInAction(action) {
		return ActionMetadata{}, false
	}
	meta := ActionMetadata{
		Action:      action,
		Description: ActionDescription(action),
		Owners:      ActionOwners(action),
	}
	if schema, ok := builtInActionArgSchemas[action]; ok {
		meta.Args = make(map[string]string, len(schema))
		for k, v := range schema {
			meta.Args[k] = v
		}
	}
	return meta, true
}

func BuiltInActions() []string {
	out := make([]string, len(builtInActionOrder))
	copy(out, builtInActionOrder)
	return out
}

func IsBuiltInAction(action string) bool {
	action = strings.TrimSpace(action)
	_, ok := builtInActions[action]
	return ok
}

func ValidateBuiltInActionArgs(action string, args map[string]any) error {
	action = strings.TrimSpace(action)
	if !IsBuiltInAction(action) {
		return fmt.Errorf("unknown built-in action %q", action)
	}
	schema := builtInActionArgSchemas[action]
	for _, required := range builtInActionRequiredArgs[action] {
		if _, ok := args[required]; !ok {
			return fmt.Errorf("action %q requires arg %q", action, required)
		}
	}
	for key, value := range args {
		expectedType, ok := schema[key]
		if !ok {
			return fmt.Errorf("action %q does not accept arg %q", action, key)
		}
		switch expectedType {
		case "bool":
			if _, ok := value.(bool); !ok {
				return fmt.Errorf("action %q arg %q expects bool", action, key)
			}
		default:
			if strings.HasPrefix(expectedType, "enum:") {
				s, ok := value.(string)
				if !ok {
					return fmt.Errorf("action %q arg %q expects string enum", action, key)
				}
				allowed := strings.Split(strings.TrimPrefix(expectedType, "enum:"), "|")
				valid := false
				for _, item := range allowed {
					if s == item {
						valid = true
						break
					}
				}
				if !valid {
					return fmt.Errorf("action %q arg %q invalid value %q (accepted: %s)", action, key, s, strings.Join(allowed, ", "))
				}
				continue
			}
			return fmt.Errorf("action %q arg %q has unsupported expected type %q", action, key, expectedType)
		}
	}
	return nil
}
